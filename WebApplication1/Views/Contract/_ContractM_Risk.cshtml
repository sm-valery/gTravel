@model gTravel.Models.ContractRisk


@Html.Hidden("ContractRisks[0].ContractRiskId", Model.ContractRiskId)
@Html.Hidden("ContractRisks[0].ContractId", Model.ContractId)
@Html.Hidden("ContractRisks[0].RiskId", Model.RiskId)
@Html.Hidden("ContractRisks[0].isMandatory", Model.isMandatory)
@Html.Hidden("ContractRisks[0].RiskProgramId", Model.RiskProgramId)

<div class="row">
    <div class="col-lg-2">
        Страх. сумма
        @Html.TextBox("ContractRisks[0].InsSum", Model.InsSum, new { @class = "form-control input-sm" })

    </div>
    <div class="col-lg-2">
        Страх. премия
        @Html.TextBox("ContractRisks[0].InsPrem", Model.InsPrem, new { @class = "form-control input-sm" })
    </div>
    <div class="col-lg-2">
        Франшиза(%)
        @Html.TextBox("ContractRisks[0].FranshPerc", Model.FranshPerc, new { @class = "form-control input-sm" })
    </div>

</div>
<div class="row" >
    <div class="col-lg-12" style="margin-top:2px;">
        <div class="label label-default" style="font-size:small;"> Премия в руб: <span id="premrur">@Model.InsPremRur</span> </div>
    </div>
</div>


<script type="text/javascript">

    $(function () {
        $("#ContractRisks_0__InsPrem").change(function () {

            var dt = $("#date_out").val();
            var vl = $(this).val();
            var cr = $("#currencyid").val();

 
            $.ajax({
                url: '@Url.Action("get_rurvalue","Contract")',
                data: {
                    dateout: dt,
                    cval: vl,
                    curid: cr
                },

                   success: function (data) {
                    $("#premrur").text(data);
                },
                error: function (request, status, error) {
                    $("#premrur").text("0");
                },
            });

        });
    })

</script>